<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL常用命令汇总 | HeiYe</title>
    <meta name="description" content="黑叶HeiYe博客，一个爱于分享和转载前端技术、前端资讯的博客。是记录博主学习和成长的一个自媒体博客、个人博客。">
    <link rel="heiyehk icon" type="image/x-icon" href="/blog/favicon.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.9576ce9d.css" as="style"><link rel="preload" href="/blog/assets/js/app.1e298e2b.js" as="script"><link rel="preload" href="/blog/assets/js/24.154d35b2.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.835238d4.js"><link rel="prefetch" href="/blog/assets/js/11.41a5d02d.js"><link rel="prefetch" href="/blog/assets/js/12.36060dd8.js"><link rel="prefetch" href="/blog/assets/js/13.46c1f7e6.js"><link rel="prefetch" href="/blog/assets/js/14.596a9014.js"><link rel="prefetch" href="/blog/assets/js/15.8a9a7931.js"><link rel="prefetch" href="/blog/assets/js/16.9e2e41c6.js"><link rel="prefetch" href="/blog/assets/js/17.f09aab2f.js"><link rel="prefetch" href="/blog/assets/js/18.4ddb2e1b.js"><link rel="prefetch" href="/blog/assets/js/19.29faf41c.js"><link rel="prefetch" href="/blog/assets/js/2.516a8147.js"><link rel="prefetch" href="/blog/assets/js/20.f65fcb95.js"><link rel="prefetch" href="/blog/assets/js/21.f1ddbf21.js"><link rel="prefetch" href="/blog/assets/js/22.3ca4523b.js"><link rel="prefetch" href="/blog/assets/js/23.f5f246a2.js"><link rel="prefetch" href="/blog/assets/js/25.2896dc17.js"><link rel="prefetch" href="/blog/assets/js/26.252512b5.js"><link rel="prefetch" href="/blog/assets/js/27.73911d79.js"><link rel="prefetch" href="/blog/assets/js/28.628c95a6.js"><link rel="prefetch" href="/blog/assets/js/29.45378328.js"><link rel="prefetch" href="/blog/assets/js/3.45a7d0fa.js"><link rel="prefetch" href="/blog/assets/js/30.a79b572d.js"><link rel="prefetch" href="/blog/assets/js/31.6fb64dd1.js"><link rel="prefetch" href="/blog/assets/js/32.3515bc3f.js"><link rel="prefetch" href="/blog/assets/js/33.9ec52426.js"><link rel="prefetch" href="/blog/assets/js/4.b13a377a.js"><link rel="prefetch" href="/blog/assets/js/5.04397d14.js"><link rel="prefetch" href="/blog/assets/js/6.1d61c7ed.js"><link rel="prefetch" href="/blog/assets/js/7.f4f9ffd8.js"><link rel="prefetch" href="/blog/assets/js/8.df8acb94.js"><link rel="prefetch" href="/blog/assets/js/9.f2f13a4b.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.9576ce9d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.jpg" alt="HeiYe" class="logo"> <span class="site-name can-hide">HeiYe</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术分享</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/article/front-end/" class="nav-link">前端文章</a></li><li class="dropdown-item"><!----> <a href="/blog/article/git/" class="nav-link">GIT</a></li><li class="dropdown-item"><!----> <a href="/blog/article/nodejs/" class="nav-link">nodejs</a></li><li class="dropdown-item"><!----> <a href="/blog/article/python/" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/blog/article/mysql/" class="nav-link router-link-active">mysql</a></li><li class="dropdown-item"><!----> <a href="/blog/article/ctf/" class="nav-link">CTF</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/storylove/story/" class="nav-link">小故事</a></li><li class="dropdown-item"><!----> <a href="/blog/storylove/love/" class="nav-link">爱好</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link">关于我</a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/hkly/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5c417f7ee51d45524c7cea18" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/heiyehk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术分享</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/article/front-end/" class="nav-link">前端文章</a></li><li class="dropdown-item"><!----> <a href="/blog/article/git/" class="nav-link">GIT</a></li><li class="dropdown-item"><!----> <a href="/blog/article/nodejs/" class="nav-link">nodejs</a></li><li class="dropdown-item"><!----> <a href="/blog/article/python/" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/blog/article/mysql/" class="nav-link router-link-active">mysql</a></li><li class="dropdown-item"><!----> <a href="/blog/article/ctf/" class="nav-link">CTF</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/storylove/story/" class="nav-link">小故事</a></li><li class="dropdown-item"><!----> <a href="/blog/storylove/love/" class="nav-link">爱好</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于我</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/" class="nav-link">关于我</a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/hkly/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5c417f7ee51d45524c7cea18" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/heiyehk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/article/mysql/" class="sidebar-link">MySQL 数据类型</a></li><li><a href="/blog/article/mysql/MySQL常用命令汇总.html" class="active sidebar-link">MySQL常用命令汇总</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/mysql/MySQL常用命令汇总.html#基础命令" class="sidebar-link">基础命令</a></li><li class="sidebar-sub-header"><a href="/blog/article/mysql/MySQL常用命令汇总.html#表结构操作命令" class="sidebar-link">表结构操作命令</a></li><li class="sidebar-sub-header"><a href="/blog/article/mysql/MySQL常用命令汇总.html#数据库表基本增、删、改、查命令" class="sidebar-link">数据库表基本增、删、改、查命令</a></li><li class="sidebar-sub-header"><a href="/blog/article/mysql/MySQL常用命令汇总.html#条件查询" class="sidebar-link">条件查询</a></li><li class="sidebar-sub-header"><a href="/blog/article/mysql/MySQL常用命令汇总.html#聚合函数查询-聚合函数不统计null值" class="sidebar-link">聚合函数查询(聚合函数不统计null值)</a></li><li class="sidebar-sub-header"><a href="/blog/article/mysql/MySQL常用命令汇总.html#分组查询" class="sidebar-link">分组查询</a></li><li class="sidebar-sub-header"><a href="/blog/article/mysql/MySQL常用命令汇总.html#多表连接查询" class="sidebar-link">多表连接查询</a></li><li class="sidebar-sub-header"><a href="/blog/article/mysql/MySQL常用命令汇总.html#添加-删除外键约束" class="sidebar-link">添加/删除外键约束</a></li><li class="sidebar-sub-header"><a href="/blog/article/mysql/MySQL常用命令汇总.html#mysql高级使用-将查询结果插入到其他表中" class="sidebar-link">Mysql高级使用 - 将查询结果插入到其他表中</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="mysql常用命令汇总"><a href="#mysql常用命令汇总" aria-hidden="true" class="header-anchor">#</a> MySQL常用命令汇总</h1> <h2 id="基础命令"><a href="#基础命令" aria-hidden="true" class="header-anchor">#</a> 基础命令</h2> <ul><li>登录数据库</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mysql -u root -p
</code></pre></div><ul><li>显示当前时间</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select now();
</code></pre></div><ul><li>退出(登出)数据库</li></ul> <div class="language- extra-class"><pre class="language-text"><code>exit();
</code></pre></div><ul><li>查看所有数据</li></ul> <div class="language- extra-class"><pre class="language-text"><code>show databases;
</code></pre></div><ul><li>创建数据库(test为数据库名)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>create database test charset=utf8;
</code></pre></div><ul><li>删除数据库(慎用)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>drop database test;
</code></pre></div><ul><li>使用(选择)数据库</li></ul> <div class="language- extra-class"><pre class="language-text"><code>use test;
</code></pre></div><ul><li>查看当前使用的数据库</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select database();
</code></pre></div><ul><li>查看当前数据库中所有数据表</li></ul> <div class="language- extra-class"><pre class="language-text"><code>show tables;
</code></pre></div><h2 id="表结构操作命令"><a href="#表结构操作命令" aria-hidden="true" class="header-anchor">#</a> 表结构操作命令</h2> <ul><li>创建表(表名为studens,包含id、name、gender、height、age)</li></ul> <div class="language-mysql extra-class"><pre class="language-text"><code>create table students(
id int unsigned not null primary key auto_increment,
name varchar(20) not null,
gender enum(&quot;男&quot;,&quot;女&quot;),
height decimal(3,2),
age tinyint default 0
);
</code></pre></div><div class="language-mysql extra-class"><pre class="language-text"><code>##### 常见数据类型:
整数：int，bit
小数：decimal
字符串：varchar,char
日期时间: date, time, datetime
枚举类型:enum
##### 常见的约束:
主键 primary key: 物理上存储的顺序. MySQL 建议所有表的主键字段都叫 id, 类型为 int unsigned
非空 not null: 此字段不允许填写空值.
惟一 unique: 此字段的值不允许重复.
默认 default: 当不填写字段对应的值会使用默认值，如果填写时以填写为准.
外键 foreign key: 对关系字段进行约束, 当为关系字段填写值时, 会到关联的表中查询此值是否存在, 如果存在则填写成功, 如果不存在则填写失败并抛出异常.
</code></pre></div><ul><li>删除表</li></ul> <div class="language- extra-class"><pre class="language-text"><code>drop table students;
</code></pre></div><ul><li>修改表-添加字段(添加birthday字段)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>alter table students add birthday datatime;
</code></pre></div><ul><li>修改表-仅修改字段类型</li></ul> <div class="language- extra-class"><pre class="language-text"><code>alter table students modify birthday data;
</code></pre></div><ul><li>修改表-修改字段名和字段类型(修改birthday字段为birth)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>alter table students change birthday birth datatime not null;
</code></pre></div><ul><li>修改表-删除字段(删除birth字段)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>alter table students drop birth;
</code></pre></div><ul><li>查看表结构</li></ul> <div class="language- extra-class"><pre class="language-text"><code>desc students;
</code></pre></div><h2 id="数据库表基本增、删、改、查命令"><a href="#数据库表基本增、删、改、查命令" aria-hidden="true" class="header-anchor">#</a> 数据库表基本增、删、改、查命令</h2> <ul><li>查询所有数据</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from students;
</code></pre></div><ul><li>查询指定列数据</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select name,age from students;
</code></pre></div><ul><li>添加数据-全列插入</li></ul> <div class="language- extra-class"><pre class="language-text"><code>insert into students values(0,&quot;小明&quot;,&quot;男&quot;,1.75,18);
</code></pre></div><ul><li>添加数据-部分列插入</li></ul> <div class="language- extra-class"><pre class="language-text"><code>insert into students(name,gender,age) values(&quot;小红&quot;,&quot;女&quot;,&quot;17&quot;);
</code></pre></div><ul><li>添加数据-全列多行插入</li></ul> <div class="language- extra-class"><pre class="language-text"><code>insert into students values (0,&quot;小张&quot;,&quot;男&quot;,1.75,18),(null,&quot;小王&quot;,&quot;男&quot;,1.68,17);
</code></pre></div><ul><li>添加数据-部分多行插入</li></ul> <div class="language- extra-class"><pre class="language-text"><code>insert into students(name,gender,age) values(&quot;小花&quot;,&quot;女&quot;,&quot;17&quot;),(&quot;小黑&quot;,&quot;男&quot;,&quot;19&quot;);
</code></pre></div><ul><li>修改数据</li></ul> <div class="language- extra-class"><pre class="language-text"><code>update students set name = &quot;张三&quot; where id = 2;
</code></pre></div><ul><li>删除数据</li></ul> <div class="language- extra-class"><pre class="language-text"><code>-- 永久删除:
delete from students where id = 1;
-- 标记式删除:
alter table students add is_delete bit not null default 0;
update students set is_delete = 1 where id = 2;
</code></pre></div><h2 id="条件查询"><a href="#条件查询" aria-hidden="true" class="header-anchor">#</a> 条件查询</h2> <ul><li>as 别名</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select name as 姓名 from students;
</code></pre></div><ul><li>distinct 去重</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select distinct name from students;
</code></pre></div><ul><li>desc降序 \ asc升序</li> <li>where条件查询</li></ul> <div class="language- extra-class"><pre class="language-text"><code>--查询年龄大于18的学生
select * from students where age&gt;18;
--查询id在2和4之间的学生(包含)
select * from students where id between 2 and 4;
--查询id在（3，5，7）内的学生
select * from students where id in (3,5,7);
--查询姓名最后一个字为&quot;红&quot;的学生
select * from students where name like '%红';
--查询名字是两个字且以&quot;小&quot;开头的学生
select * from students where name like '小_';
--查询未删除男生信息，按学号降序
 select * from students where is_delete = 0 and gender = '男' order by id desc;
--查询前3行男生信息
 select * from students where gender = '男'  limit 3;
</code></pre></div><h2 id="聚合函数查询-聚合函数不统计null值"><a href="#聚合函数查询-聚合函数不统计null值" aria-hidden="true" class="header-anchor">#</a> 聚合函数查询(聚合函数不统计null值)</h2> <ul><li>查询学生个数</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select count(*) from students;
</code></pre></div><ul><li>查询男生标号的最值</li></ul> <div class="language- extra-class"><pre class="language-text"><code>-- 查询男生的编号最大值
select max(id) from students where gender=&quot;男&quot;;
-- 查询男生的编号最小值
select min(id) from students where gender=&quot;男&quot;;
- 求女生的平均身高
select avg(height) from students where gender=&quot;女&quot;;
</code></pre></div><h2 id="分组查询"><a href="#分组查询" aria-hidden="true" class="header-anchor">#</a> 分组查询</h2> <ul><li>按gender字段分组</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select gender from students group by gender;
</code></pre></div><ul><li>根据name和gender字段进行分组</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select gender,name from students group by gender,name;
</code></pre></div><ul><li>根据gender字段进行分组， 查询每个分组的姓名信息</li></ul> <div class="language- extra-class"><pre class="language-text"><code>-- group_concat显示每个分组的指定字段的信息
select gender,group_concat(name) from students group by gender;
</code></pre></div><ul><li>统计不同性别的平均年龄,并保留两位小数</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select gender,round(avg(age),2) from students group by gender;
</code></pre></div><ul><li>根据gender字段进行分组，统计分组条数大于2的</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select gender, count(*) from students group by gender having count(*) &gt; 2;
</code></pre></div><ul><li>根据gender字段进行分组,行末汇总所有人的年龄(rollup 在行末显示总汇总信息)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select gender, group_concat(age) from students group by gender with rollup;
</code></pre></div><h2 id="多表连接查询"><a href="#多表连接查询" aria-hidden="true" class="header-anchor">#</a> 多表连接查询</h2> <p>inner/left/right on :连接查询关键字
on:连接查询条件
先创建班级表:</p> <div class="language- extra-class"><pre class="language-text"><code>create table classes(id int unsigned not null primary key auto_increment,name varchar(20) not null);
</code></pre></div><p>插入3条班级数据:</p> <div class="language- extra-class"><pre class="language-text"><code>insert into classes values(0,&quot;一班&quot;),(null,&quot;二班&quot;),(null,&quot;三班&quot;);
</code></pre></div><p>students 表增加c_id字段,并赋值</p> <ul><li>内连接(以两表指定字段的交集连接)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from students as s inner join classes as c on s.c_id=c.id
</code></pre></div><ul><li>左连接(以左表为基准数查询右表数据,右表数据不存在时显示null)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from students as s right join classes as c on s.c_id = c.id
</code></pre></div><ul><li>右连接(与左连接相反)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from students as s right join classes as c on s.c_id = c.id
</code></pre></div><ul><li>自连接(左表右表是同一个数据源表,自连接必须对表取不同别名)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select c.id, c.title, c.pid, p.title from areas c inner join areas p on c.pid = p.id;
</code></pre></div><ul><li><p>子查询
在一个 select 语句中,嵌入了另外一个 select 语句, 那么被嵌入的 select 语句称之为子查询语句，外部那个select语句则称为主查询.
子查询是可以独立使用的查询语句,辅助主查询充当数据源.</p></li> <li><p>查询大于平均年龄的学生</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from students where age &gt; (select avg(age) from students);
</code></pre></div><ul><li>查找年龄最大,身高最高的学生</li></ul> <div class="language- extra-class"><pre class="language-text"><code>select * from students where (age,height) = (select max(age),max(height) from students);
</code></pre></div><h2 id="添加-删除外键约束"><a href="#添加-删除外键约束" aria-hidden="true" class="header-anchor">#</a> 添加/删除外键约束</h2> <ul><li>添加外键约束
创建表时添加:</li></ul> <div class="language- extra-class"><pre class="language-text"><code> create table school(
id int not null primary key auto_increment,
name varchar(30)
);
create table teacher(
id int not null primary key auto_increment,
name varchar(30), 
s_id int, 
foreign key (s_id) references school(id)
);
</code></pre></div><ul><li>为已存在的表添加:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>alter table students add foreign key (c_id) references classes(id);
</code></pre></div><ul><li>删除外键</li></ul> <div class="language- extra-class"><pre class="language-text"><code>alter table drop foreign key teacher_ibfk_1;
(*外键名使用&quot;show create table teacher&quot;命令查找*)
</code></pre></div><h2 id="mysql高级使用-将查询结果插入到其他表中"><a href="#mysql高级使用-将查询结果插入到其他表中" aria-hidden="true" class="header-anchor">#</a> Mysql高级使用 - 将查询结果插入到其他表中</h2> <p>已存在商品表goods,包含字段:种类cate_name,商品名name,价格price</p> <div class="language- extra-class"><pre class="language-text"><code>-- 先创建单独的商品分类表,仅包含id和商品名name
create table goods_cate(
id int not null primary key auto_increment, name varchar(30) not null
);

-- 查询goods表中商品的分类信息
select cate_name from goods group by cate_name;

-- 将查询结果插入到good_cates表中
insert into goods_cate(name) select cate_name from goods group by cate_name;

-- 查看goods表中的商品分类名称对应的商品分类id
select * from goods g inner join goods_cate gc on g.cate_name=gc.name;

-- 将goods表中的分类名称更改成商品分类表中对应的分类id，连接更新表中的某个字段
updata goods inner join goods_cate on goods.cate_name=goods_cate.name set goods.cate_name=goods_cate.id;
</code></pre></div><p>非商用，侵删，转自: <a href="https://www.jianshu.com/p/d4da6d056a77" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/d4da6d056a77<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/blog/assets/js/app.1e298e2b.js" defer></script><script src="/blog/assets/js/24.154d35b2.js" defer></script>
  </body>
</html>
